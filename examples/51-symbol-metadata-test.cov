snippet id="console.println" kind="extern-abstract"

effects
  effect console
end

signature
  fn name="println"
    param name="message" type="String"
    returns type="Void"
  end
end

metadata
  contract="console.log@1"
end

end

snippet id="test.log_message" kind="fn"

effects
  effect console
end

requires
  req id="R-001"
    text "Must log the provided message to console"
    priority high
  end
  req id="R-002"
    text "Must handle empty messages gracefully"
    priority medium
  end
end

signature
  fn name="log_message"
    param name="msg" type="String"
    returns type="Void"
  end
end

body
  step id="s1" kind="call"
    fn="console.println"
    arg name="message" from="msg"
    as="_"
  end
end

tests
  test id="T-001" kind="unit" covers="R-001"
    step id="t1" kind="call"
      fn="test.log_message"
      arg name="msg" lit="Hello, Test!"
      as="_"
    end
  end
  test id="T-002" kind="unit" covers="R-002"
    step id="t2" kind="call"
      fn="test.log_message"
      arg name="msg" lit=""
      as="_"
    end
  end
end

end

snippet id="test.make_greeting" kind="fn"

signature
  fn name="make_greeting"
    param name="name" type="String"
    returns type="String"
  end
end

body
  step id="s1" kind="return"
    from="name"
    as="_"
  end
end

end

snippet id="test.greet_and_log" kind="fn"

effects
  effect console
end

signature
  fn name="greet_and_log"
    param name="name" type="String"
    returns type="Void"
  end
end

body
  step id="s1" kind="call"
    fn="test.make_greeting"
    arg name="name" from="name"
    as="message"
  end
  step id="s2" kind="call"
    fn="test.log_message"
    arg name="msg" from="message"
    as="_"
  end
end

end
